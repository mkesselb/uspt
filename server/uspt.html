<html>
	<meta charset="utf-8">
	<title>uspt prototype</title>
	<script src="/socket.io/socket.io.js"></script>
	<script src="http://code.jquery.com/jquery-1.11.1.js"></script>
	<body>
		<h1>uspt prototype</h1>
		
		<h3>Participate in personality study:</h3>
		
		<div id=hashtoken></div>
		
		<form id="formLogin">
			First name: <br>
			<input type="text" id="fname" maxlength="20"> <br> 
			<br>
			
			Last name: <br>
			<input type="text" id="lname" maxlength="20"> <br>
			<br>
			
			Sex: <br>
			<input type="text" id="sex" maxlength="1"> (Format: m / f)<br>
			<br>
			
			Birthday: <br>
			<input type="text" id="bday" maxlength="8"> (Format: ddmmyyyy)<br>
			<br>
			
			Institution: <br>
			<input type="text" id="inst" maxlength="20"> <br>
			<br>
			
			Survey Key: <br>
			<input type="text" id="skey" maxlength="20"> <br>
			<br>
			
			<button type="button" id="button-login">login</button>
		</form>
		
		<p>uspt - university students personality testing</p>
		
		<script>
		$(document).ready(function(){
			var socket = io.connect();
			
			$('#formLogin').show();
			$('#hashtoken').hide();
			
			$('#button-login').click(function(){
				socket.emit('login', 
				{fname: $('#fname').val(),
				lname: $('#lname').val(),
				sex: $('#sex').val(),
				birthday: $('#bday').val(),
				institution: $('#inst').val(),
				survey_key: $('#skey').val()});
			});
			
			socket.on('login-success', function(data){
				$('#formLogin').hide();
				$('#hashtoken').show();
				$('#hashtoken').append('hash token:' + data.hash);
			});
		});
		</script>
	</body>
</html>